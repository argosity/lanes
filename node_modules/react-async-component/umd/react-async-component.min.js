!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-async-component"]=t(require("react")):e["react-async-component"]=t(e.React)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){var t=e.name,n=e.resolve,o=e.es6Aware,f=void 0===o||o,p=e.ssrMode,y=void 0===p?"render":p,m=e.Loading;if(d.indexOf(y)===-1)throw new Error("Invalid ssrMode provided to createAsyncComponent");var b=null,v=function(e){return!f||"function"!=typeof e&&"object"!==("undefined"==typeof e?"undefined":c(e))||"undefined"==typeof e.default?e:e.default},h=function(){var e=n();if(!l(e))throw new Error('The "resolve" function on an AsyncComponent should return a Promise');return e},C=function(e){function t(e,n){r(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=n.asyncComponents,f=n.asyncComponentsAncestor;o.state={Component:null};var s=i.getNextId,c=i.getComponent;b||(b=s());var p=v(c(b));return p?o.state={Component:p}:o.getAsyncComponentData=function(){return{id:b,defer:"defer"===y||f&&f.isBoundary,getResolver:function(){return o.resolveComponent()}}},o}return i(t,e),s(t,[{key:"getChildContext",value:function(){if("boundary"===y)return{asyncComponentsAncestor:{isBoundary:!0}}}},{key:"componentDidMount",value:function(){this.state.Component||this.resolveComponent(this.props)}},{key:"resolveComponent",value:function(){var e=this;return h().then(function(t){e.unmounted||(e.context.asyncComponents.registerComponent(b,t),e.setState&&e.setState({Component:v(t)}))})}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this.state.Component;return e?a.default.createElement(e,this.props):m?a.default.createElement(m,this.props):null}}]),t}(a.default.Component);return C.childContextTypes={asyncComponentsAncestor:a.default.PropTypes.shape({isBoundary:a.default.PropTypes.bool})},C.contextTypes={asyncComponents:a.default.PropTypes.shape({getNextId:a.default.PropTypes.func.isRequired,getComponent:a.default.PropTypes.func.isRequired,registerComponent:a.default.PropTypes.func.isRequired}).isRequired},C.displayName=t||"AsyncComponent",C}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(0),a=o(p),l=function(e){return"object"===("undefined"==typeof e?"undefined":c(e))&&"function"==typeof e.then},d=["render","defer","boundary"];t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){var e=0,t={};return{getNextId:function(){return e+=1},registerComponent:function(e,n){t[e]=n},getComponent:function(e){return t[e]},getResolved:function(){return Object.keys(t).reduce(function(e,t){return Object.assign(e,r({},t,!0))},{})}}}function i(e){var t=u(),n="undefined"!=typeof window,o=n&&"undefined"!=typeof window[y.STATE_IDENTIFIER]?window[y.STATE_IDENTIFIER]:null,r=c.default.createElement(d.default,{execContext:t},e);if(n&&!o)return Promise.resolve({appWithAsyncComponents:r});var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=[],i=function(e,n,i){var f=!r&&e===t;if(n&&"function"==typeof n.getAsyncComponentData&&!f){var s=n.getAsyncComponentData(),c=s.id,p=s.defer,a=s.getResolver;if(o){if(!o.resolved[c])return!1;o[c]=!1}else if(p)return!1;var l=a();return u.push({resolver:l,element:e,context:Object.assign(i,{ASYNC_WALKER_BOUNDARY:!0})}),!1}};(0,a.default)(t,i,n);var f=u.map(function(t){var n=t.resolver,o=t.element,r=t.context;return n.then(function(){return e(o,r)})});return f.length>0?Promise.all(f):Promise.resolve([])};return i(r,{},!0).catch(function(){}).then(function(){"object"===("undefined"==typeof window?"undefined":f(window))&&(window[y.STATE_IDENTIFIER]=null)}).then(function(){return{appWithAsyncComponents:r,state:{resolved:t.getResolved()},STATE_IDENTIFIER:y.STATE_IDENTIFIER}})}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var s=n(0),c=o(s),p=n(5),a=o(p),l=n(3),d=o(l),y=n(4)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),c=o(s),p=function(e){function t(){return r(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"getChildContext",value:function(){return{asyncComponents:{getNextId:this.props.execContext.getNextId,getComponent:this.props.execContext.getComponent,registerComponent:this.props.execContext.registerComponent}}}},{key:"render",value:function(){return c.default.Children.only(this.props.children)}}]),t}(c.default.Component);p.propTypes={children:c.default.PropTypes.node.isRequired,execContext:c.default.PropTypes.shape({getNextId:c.default.PropTypes.func.isRequired,getComponent:c.default.PropTypes.func.isRequired,registerComponent:c.default.PropTypes.func.isRequired}).isRequired},p.childContextTypes={asyncComponents:c.default.PropTypes.shape({getNextId:c.default.PropTypes.func.isRequired,getComponent:c.default.PropTypes.func.isRequired,registerComponent:c.default.PropTypes.func.isRequired}).isRequired},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATE_IDENTIFIER="__REACT_ASYNC_COMPONENTS_STATE__"},function(e,t,n){"use strict";function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"==typeof e.type){var i=e.type,f=Object.assign({},i.defaultProps,e.props),s=n,c=void 0,p=i.prototype&&(i.prototype.isReactComponent||i.prototype.isPureReactComponent);if(p){var a=function(){var o=new i(f,n);return o.props=o.props||f,o.context=o.context||n,o.setState=function(e){o.state=Object.assign({},o.state,e)},o.componentWillMount&&o.componentWillMount(),o.getChildContext&&(s=Object.assign({},n,o.getChildContext())),t(e,o,n)===!1?{v:void 0}:void(c=o.render())}();if("object"===("undefined"==typeof a?"undefined":r(a)))return a.v}else{if(t(e,null,n)===!1)return;c=i(f,n)}c&&o(c,t,s)}else{if(t(e,null,n)===!1)return;e.props&&e.props.children&&u.Children.forEach(e.props.children,function(e){e&&o(e,t,n)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var u=n(0);t.isPromise=function(e){return"object"===("undefined"==typeof e?"undefined":r(e))&&"function"==typeof e.then}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.withAsyncComponents=t.createAsyncComponent=void 0;var r=n(1),u=o(r),i=n(2),f=o(i);t.createAsyncComponent=u.default,t.withAsyncComponents=f.default}])});